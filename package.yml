name       : simplenote
version    : 1.1.1
release    : 7
source     :
    - git|https://github.com/Automattic/simplenote-electron : v1.1.1
license    : GPL-2.0
component  : office.notes
summary    : The simplest way to keep notes.
description: |
    A Simplenote React app packaged in Electron.
networking : yes
builddeps  :
    - pkgconfig(alsa)
    - pkgconfig(fontconfig)
    - pkgconfig(gconf-2.0)
    - pkgconfig(gtk+-2.0)
    - pkgconfig(xscrnsaver)
    - pkgconfig(xtst)
    - cups-devel
    - nodejs
setup      : |
    %patch -p1 < $pkgfiles/0001-Don-t-build-a-deb-thanks.patch
    %patch -p1 < $pkgfiles/0001-Small-desktop-fixes.patch
build      : |
    npm config set unsafe-perm=true
    npm install
    %make package-linux
install    : |
    install -Dm00644 $workdir/resources/images/icon_256x256.png $installdir/usr/share/pixmaps/simplenote.png
    install -Dm00644 $workdir/resources/linux/simplenote.desktop $installdir/usr/share/applications/simplenote.desktop

    install -dm00755 $installdir/usr/share/simplenote/
    cp -R $workdir/release/Simplenote-linux-x64/* $installdir/usr/share/simplenote/

    install -dm00755 $installdir/usr/bin
    ln -sv /usr/share/simplenote/Simplenote $installdir/usr/bin/simplenote
